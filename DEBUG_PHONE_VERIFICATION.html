<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” ØªØ´Ø®ÙŠØµ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2563eb;
            border-bottom: 3px solid #2563eb;
            padding-bottom: 10px;
        }
        h2 {
            color: #059669;
            margin-top: 30px;
        }
        .step {
            background: #f0f9ff;
            border-left: 4px solid #2563eb;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .step h3 {
            margin-top: 0;
            color: #1e40af;
        }
        .code {
            background: #1e293b;
            color: #10b981;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 10px 0;
        }
        .warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .success {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .error {
            background: #fee2e2;
            border-left: 4px solid #ef4444;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        ul {
            line-height: 1.8;
        }
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
            margin: 5px;
        }
        .badge-blue { background: #dbeafe; color: #1e40af; }
        .badge-green { background: #d1fae5; color: #065f46; }
        .badge-red { background: #fee2e2; color: #991b1b; }
        .badge-yellow { background: #fef3c7; color: #92400e; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” ØªØ´Ø®ÙŠØµ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</h1>
        
        <div class="warning">
            <strong>âš ï¸ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…Ø¨Ù„Øº Ø¹Ù†Ù‡Ø§:</strong><br>
            Ø¹Ù†Ø¯ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø·Ù† Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ ÙŠØ¸Ù‡Ø± Ø±Ù‚Ù… Ù‡Ø§ØªÙÙ‡ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙƒÙ€ <strong>"âŒ Ù…Ø­Ø¬ÙˆØ²"</strong> Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† <strong>"âœ… Ø±Ù‚Ù…Ùƒ"</strong>.
        </div>

        <h2>ğŸ“‹ Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ</h2>

        <div class="step">
            <h3>Ø§Ù„Ø®Ø·ÙˆØ© 1ï¸âƒ£: Ø§ÙØªØ­ ØµÙØ­Ø© ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨</h3>
            <div class="code">
http://localhost:8080/tekrit_municipality/public/citizen-requests.php
            </div>
        </div>

        <div class="step">
            <h3>Ø§Ù„Ø®Ø·ÙˆØ© 2ï¸âƒ£: Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø¯Ø®ÙˆÙ„ Ù…ÙˆØ¬ÙˆØ¯</h3>
            <p>Ù…Ø«Ù„Ø§Ù‹: <span class="badge badge-blue">TKT-A3B7K</span> Ø£Ùˆ <span class="badge badge-blue">TKT-C670E2A8</span></p>
            <p>Ø§Ø¶ØºØ· <strong>"ğŸ” Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"</strong></p>
        </div>

        <div class="step">
            <h3>Ø§Ù„Ø®Ø·ÙˆØ© 3ï¸âƒ£: Ø§ÙØªØ­ Developer Console</h3>
            <p>Ø§Ø¶ØºØ· <strong>F12</strong> Ø£Ùˆ <strong>Ctrl+Shift+I</strong></p>
            <p>Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨ <strong>Console</strong></p>
        </div>

        <div class="step">
            <h3>Ø§Ù„Ø®Ø·ÙˆØ© 4ï¸âƒ£: Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙÙŠ Console</h3>
            <p>ÙŠØ¬Ø¨ Ø£Ù† ØªØ±Ù‰:</p>
            <div class="code">
=== VERIFY PHONE DEBUG ===
Phone: 03495685
loadedAccessCode: TKT-A3B7K
currentAccessCode: TKT-A3B7K
originalPhone: 03495685
Response: {success: true, available: true, is_owner: true, ...}
            </div>
        </div>

        <div class="step">
            <h3>Ø§Ù„Ø®Ø·ÙˆØ© 5ï¸âƒ£: Ø§ÙØ­Øµ PHP Error Log</h3>
            <p>Ø§ÙØªØ­ Ù…Ù„Ù: <code>C:\xampp\apache\logs\error.log</code></p>
            <p>Ø§Ø¨Ø­Ø« Ø¹Ù†:</p>
            <div class="code">
=== CHECK PHONE OWNERSHIP DEBUG ===
Phone: 03495685
Current Access Code (from request): 'TKT-A3B7K'
Existing Access Code (from DB): 'TKT-A3B7K'
Citizen Name: ziad el rex
Empty check: NO
Match check: YES
âœ… Result: IS OWNER
            </div>
        </div>

        <h2>ğŸ” Ù…Ø§ Ø§Ù„Ø°ÙŠ Ù†Ø¨Ø­Ø« Ø¹Ù†Ù‡ØŸ</h2>

        <div class="success">
            <h3>âœ… Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù‚ÙŠÙ… ØµØ­ÙŠØ­Ø©:</h3>
            <ul>
                <li><code>loadedAccessCode</code> = <strong>TKT-XXXXX</strong> (Ù„ÙŠØ³ null)</li>
                <li><code>currentAccessCode</code> = <strong>TKT-XXXXX</strong> (Ù†ÙØ³ Ø§Ù„Ù‚ÙŠÙ…Ø©)</li>
                <li><code>originalPhone</code> = <strong>03495685</strong> (Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ)</li>
                <li><code>Match check: YES</code> ÙÙŠ PHP log</li>
                <li><code>is_owner: true</code> ÙÙŠ Response</li>
            </ul>
            <p><strong>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:</strong> <span class="badge badge-green">âœ… Ø±Ù‚Ù…Ùƒ</span></p>
        </div>

        <div class="error">
            <h3>âŒ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù‚ÙŠÙ… Ø®Ø§Ø·Ø¦Ø©:</h3>
            <ul>
                <li><code>loadedAccessCode</code> = <strong>null</strong> â† Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ù‡Ù†Ø§!</li>
                <li><code>currentAccessCode</code> = <strong>''</strong> (ÙØ§Ø±Øº)</li>
                <li><code>Match check: NO</code> ÙÙŠ PHP log</li>
                <li><code>is_owner: false</code> ÙÙŠ Response</li>
            </ul>
            <p><strong>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©:</strong> <span class="badge badge-red">âŒ Ù…Ø­Ø¬ÙˆØ²</span></p>
        </div>

        <h2>ğŸ”§ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©</h2>

        <div class="step">
            <h3>Ø§Ù„Ø­Ù„ 1ï¸âƒ£: Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªÙ†ÙÙŠØ° setTimeout</h3>
            <p>ØªØ£ÙƒØ¯ Ø£Ù† <code>loadedAccessCode</code> ÙŠØªÙ… ØªØ¹ÙŠÙŠÙ†Ù‡ <strong>Ù‚Ø¨Ù„</strong> Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ <code>verifyPhoneNumber()</code></p>
            <div class="code">
setTimeout(() => {
    loadedAccessCode = fullAccessCode; // â† Ù‡Ù†Ø§ Ø£ÙˆÙ„Ø§Ù‹
    originalPhone = data.phone;
    verifyPhoneNumber(data.phone); // â† Ø«Ù… Ù‡Ù†Ø§
}, 1500);
            </div>
        </div>

        <div class="step">
            <h3>Ø§Ù„Ø­Ù„ 2ï¸âƒ£: Ø²ÙŠØ§Ø¯Ø© ÙˆÙ‚Øª setTimeout</h3>
            <p>Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙØ­Øµ ÙŠØ­Ø¯Ø« Ù‚Ø¨Ù„ ØªØ¹ÙŠÙŠÙ† <code>loadedAccessCode</code>ØŒ Ø¬Ø±Ù‘Ø¨ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆÙ‚Øª:</p>
            <div class="code">
setTimeout(() => {
    // ...
}, 2000); // Ù…Ù† 1500 Ø¥Ù„Ù‰ 2000
            </div>
        </div>

        <div class="step">
            <h3>Ø§Ù„Ø­Ù„ 3ï¸âƒ£: ØªØ£Ø®ÙŠØ± verifyPhoneNumber</h3>
            <p>Ø£Ø¶Ù setTimeout Ø¥Ø¶Ø§ÙÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø£ÙˆÙ„:</p>
            <div class="code">
setTimeout(() => {
    loadedAccessCode = fullAccessCode;
    originalPhone = data.phone;
    
    // ØªØ£Ø®ÙŠØ± Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„ØªØ£ÙƒØ¯
    setTimeout(() => {
        verifyPhoneNumber(data.phone);
    }, 100);
}, 1500);
            </div>
        </div>

        <h2>ğŸ“Š Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ´Ø®ÙŠØµ</h2>

        <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
            <thead>
                <tr style="background: #2563eb; color: white;">
                    <th style="padding: 10px; border: 1px solid #ddd;">Ø§Ù„Ù…ØªØºÙŠØ±</th>
                    <th style="padding: 10px; border: 1px solid #ddd;">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©</th>
                    <th style="padding: 10px; border: 1px solid #ddd;">Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©</th>
                    <th style="padding: 10px; border: 1px solid #ddd;">Ø§Ù„Ø­Ø§Ù„Ø©</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;"><code>loadedAccessCode</code></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">TKT-A3B7K</td>
                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>ØŸ</strong></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">ØªØ­Ù‚Ù‚ Ù…Ù† Console</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;"><code>originalPhone</code></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">03495685</td>
                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>ØŸ</strong></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">ØªØ­Ù‚Ù‚ Ù…Ù† Console</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;"><code>data.is_owner</code></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">true</td>
                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>ØŸ</strong></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">ØªØ­Ù‚Ù‚ Ù…Ù† Response</td>
                </tr>
            </tbody>
        </table>

        <h2>ğŸ“ Ø§Ù„ØªÙˆØ§ØµÙ„</h2>
        <div class="warning">
            <p><strong>Ø¨Ø¹Ø¯ ØªÙ†ÙÙŠØ° Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø£Ø¹Ù„Ø§Ù‡ØŒ Ø£Ø±Ø³Ù„ Ù„ÙŠ:</strong></p>
            <ol>
                <li>Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© Ù…Ù† <strong>Console</strong> (F12)</li>
                <li>Ø¢Ø®Ø± 20 Ø³Ø·Ø± Ù…Ù† <strong>error.log</strong></li>
                <li>Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø°ÙŠ Ø§Ø³ØªØ®Ø¯Ù…ØªÙ‡</li>
            </ol>
            <p>Ø³Ø£ØªÙ…ÙƒÙ† Ù…Ù† ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¨Ø¯Ù‚Ø©!</p>
        </div>

        <div class="success">
            <h3>âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Debug Logging</h3>
            <p>Ø§Ù„Ø¢Ù† Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ³Ø¬Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙÙŠ:</p>
            <ul>
                <li><strong>Browser Console:</strong> Ù‚ÙŠÙ… JavaScript</li>
                <li><strong>PHP Error Log:</strong> Ù‚ÙŠÙ… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
            </ul>
        </div>
    </div>
</body>
</html>

