# ๐ก๏ธ ุญู ูุดููุฉ ุงูุชูุงุก ุตูุงุญูุฉ reCAPTCHA - ูุธุงู ุจูุฏูุฉ ุชูุฑูุช

## ๐ ุงููุดููุฉ ุงูููุชุดูุฉ

ุจุนุฏ ุชูุนูู reCAPTCHAุ ูุงูุช ุนูููุฉ ุงูุญูุธ ุชูุดู ุจุณุจุจ:

**ููุฏ ุงูุฎุทุฃ**: `timeout-or-duplicate`  
**ุงูุณุจุจ ุงูุฌุฐุฑู**: ุงูุชูุงุก ุตูุงุญูุฉ ุงูุชููู ุฃู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงูู

### ุชูุงุตูู ุงููุดููุฉ:
- reCAPTCHA v3 ุงูุชููู ูู ูุฏุฉ ุตูุงุญูุฉ ูุตูุฑุฉ (ุญูุงูู ุฏูููุชูู)
- ุงูุชููู ูุงู ููููุฏ ุนูุฏ ุชุญููู ุงูุตูุญุฉ ููุท
- ุฅุฐุง ุฃุฎุฐ ุงููุณุชุฎุฏู ููุชุงู ูู ููุก ุงููููุฐุฌุ ููุชูู ุงูุชููู
- ุงูุชููู ูุง ูููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงูู (ููุฑูุถ ูู duplicate)

## โ ุงูุญู ุงูููุทุจู

### 1. ุชุญุฏูุซ ุงูุชููู ูุจู ุงูุฅุฑุณุงู ูุจุงุดุฑุฉ
```javascript
form.addEventListener('submit', function(e) {
    e.preventDefault();
    
    // ุฅุธูุงุฑ ุฑุณุงูุฉ ุงูุชุธุงุฑ
    const submitBtn = form.querySelector('button[type="submit"]');
    submitBtn.innerHTML = 'โณ ุฌุงุฑู ุงูุชุญูู ุงูุฃููู...';
    submitBtn.disabled = true;
    
    // ุชูููุฏ ุชููู ุฌุฏูุฏ
    updateRecaptchaToken();
    
    // ุงูุชุญูู ูู ูุฌุงุญ ุงูุชุญุฏูุซ ุซู ุงูุฅุฑุณุงู
    setTimeout(function() {
        const token = document.getElementById('recaptcha-token-citizen').value;
        if (token && token.length > 100) {
            form.submit();
        } else {
            alert('ูุดู ูู ุงูุชุญูู ุงูุฃูููุ ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู');
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }
    }, 1000);
});
```

### 2. ุชุญุฏูุซ ุฏูุฑู ููุชููู
```javascript
// ุชุญุฏูุซ ุงูุชููู ูู 90 ุซุงููุฉ ูุชุฌูุจ ุงูุชูุงุก ุงูุตูุงุญูุฉ
setInterval(function() {
    updateRecaptchaToken();
    console.log('๐ ุชู ุชุญุฏูุซ reCAPTCHA token ุชููุงุฆูุงู');
}, 90000); // ูู ุฏูููุฉ ููุตู
```

### 3. ุฅุนุฏุงุฏุงุช ูุฑูุฉ ููุงุฎุชุจุงุฑ ุงููุญูู
```php
// ุชูููู ูุชุทูุจุงุช ุงูููุงุท ููุงุฎุชุจุงุฑ ุงููุญูู
$min_score = ($_SERVER['HTTP_HOST'] === 'localhost' || $_SERVER['HTTP_HOST'] === '127.0.0.1') ? 0.3 : 0.5;
$recaptcha_result = verify_recaptcha($_POST, $_SERVER['REMOTE_ADDR'] ?? null, $min_score);

// ููุงุฎุชุจุงุฑ ุงููุญูู: ุชุญุฐูุฑ ุจุฏูุงู ูู ููุน ุงูุฅุฑุณุงู
if (!$recaptcha_result['success']) {
    if ($_SERVER['HTTP_HOST'] === 'localhost' || $_SERVER['HTTP_HOST'] === '127.0.0.1') {
        error_log('reCAPTCHA warning (localhost): ' . $recaptcha_result['error']);
        $recaptcha_warning = 'โ๏ธ ุชุญุฐูุฑ ุงูุฃูุงู (ุงุฎุชุจุงุฑ ูุญูู): ' . $recaptcha_result['error'];
    } else {
        $error_message = 'ูุดู ุงูุชุญูู ุงูุฃููู: ' . $recaptcha_result['error'];
    }
}
```

## ๐ฏ ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุงููุญุณูุฉ

### ูุจู ุงูุญู:
โ ูุดู ููุงุฌุฆ ูู ุงูุญูุธ ุจุฏูู ุชูุถูุญ  
โ ุฑุณุงุฆู ุฎุทุฃ ุบูุฑ ูุงุถุญุฉ  
โ ููุฏุงู ุงูุจูุงูุงุช ุงูููุฏุฎูุฉ  

### ุจุนุฏ ุงูุญู:
โ ุฑุณุงูุฉ ุงูุชุธุงุฑ ูุงุถุญุฉ: "โณ ุฌุงุฑู ุงูุชุญูู ุงูุฃููู..."  
โ ุชุญุฏูุซ ุชููุงุฆู ููุชููู  
โ ุฅุนุงุฏุฉ ูุญุงููุฉ ุชููุงุฆูุฉ ูู ุญุงูุฉ ุงููุดู  
โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ  

## ๐งช ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ููุงุฎุชุจุงุฑ ุงููุญูู (localhost):
- โ ุงูุญูุธ ุณููุฌุญ ูู ูุนุธู ุงูุญุงูุงุช
- โ๏ธ ูุฏ ุชุธูุฑ ุชุญุฐูุฑุงุช ุฃูููุฉ (ูุณููุญุฉ)
- ๐ ุญุฏ ุงูููุงุท ุงููุทููุจ: 0.3

### ููุฅูุชุงุฌ:
- โ ุญูุงูุฉ ูุงููุฉ ูู ุงูุจูุชุงุช
- ๐ ุญุฏ ุงูููุงุท ุงููุทููุจ: 0.5
- ๐ ุชุณุฌูู ูุงูู ูููุญุงููุงุช ุงููุดุจููุฉ

## ๐ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ

1. **ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซ ุงูุชููุงุฆู:**
   - ุงูุชุญ ุตูุญุฉ ุทูุจุงุช ุงูููุงุทููู
   - ุงูุชุธุฑ ุฃูุซุฑ ูู ุฏูููุชูู
   - ุงููุฃ ุงููููุฐุฌ ูุฃุฑุณูู
   - ูุฌุจ ุฃู ููุฌุญ ุงูุญูุธ

2. **ุงุฎุชุจุงุฑ ุฑุณุงูุฉ ุงูุงูุชุธุงุฑ:**
   - ุงููุฃ ุงููููุฐุฌ ูุงุถุบุท "ุชูุฏูู ุงูุทูุจ"
   - ูุฌุจ ุฃู ุชุฑู "โณ ุฌุงุฑู ุงูุชุญูู ุงูุฃููู..."
   - ูุฌุจ ุฃู ููุฑุณู ุงููููุฐุฌ ุฎูุงู ุซุงููุฉ

3. **ุงุฎุชุจุงุฑ ูุญุฏุฉ ุงูุชุญูู:**
   - ุงูุชุญ Developer Tools (F12)
   - ุงุจุญุซ ุนู ุฑุณุงุฆู reCAPTCHA ูู Console
   - ูุฌุจ ุฃู ุชุฑู ุชุญุฏูุซุงุช ุฏูุฑูุฉ ูู 90 ุซุงููุฉ

## ๐ง ุฅุนุฏุงุฏุงุช ูุงุจูุฉ ููุชุฎุตูุต

### ุชุบููุฑ ูุฏุฉ ุงูุชุญุฏูุซ ุงูุชููุงุฆู:
```javascript
// ุชุบููุฑ ูู 90 ุซุงููุฉ ุฅูู 60 ุซุงููุฉ
setInterval(updateRecaptchaToken, 60000);
```

### ุชุบููุฑ ุญุฏ ุงูููุงุท:
```php
// ูููุฒูุฏ ูู ุงูุตุฑุงูุฉ
$min_score = 0.7;

// ูููุฒูุฏ ูู ุงููุฑููุฉ  
$min_score = 0.3;
```

### ุชุนุทูู ุงูุชุญุฏูุซ ุงูุชููุงุฆู:
```javascript
// ุนูู ูุฐุง ุงูุณุทุฑ ูุชุนุทูู ุงูุชุญุฏูุซ ุงูุชููุงุฆู
// setInterval(updateRecaptchaToken, 90000);
```

## ๐จ ูุฑุงูุจุฉ ุงููุธุงู

### ูุญุต ุงูุณุฌูุงุช:
```bash
# ููุญุต ุชุญุฐูุฑุงุช reCAPTCHA
tail -f /path/to/php/error.log | grep "reCAPTCHA"

# ููุญุต ุงูุทูุจุงุช ุงููุงุฌุญุฉ
tail -f /path/to/php/error.log | grep "Citizen Request"
```

### ูุคุดุฑุงุช ุงููุฌุงุญ:
- โ ุงูุฎูุงุถ ุฃุฎุทุงุก `timeout-or-duplicate`
- โ ุฒูุงุฏุฉ ูุนุฏู ูุฌุงุญ ุงูุทูุจุงุช
- โ ุชุญุฏูุซุงุช ุฏูุฑูุฉ ูู ูุญุฏุฉ ุงูุชุญูู

## ๐ก ูุตุงุฆุญ ููุตูุงูุฉ

1. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**: ุชุญูู ูู ุณุฑุนุฉ ุงุณุชุฌุงุจุฉ Google reCAPTCHA
2. **ุชุญุฏูุซ ุงูููุงุชูุญ**: ููุฅูุชุงุฌุ ุงุณุชุฎุฏู ููุงุชูุญ ูุฎุตุตุฉ
3. **ุถุจุท ุงูููุงุท**: ุฑุงูุจ ูุนุฏู ุงูุฑูุถ ูุนุฏูู ุงูุญุฏ ุงูุฃุฏูู
4. **ุชุญุฏูุซ ุงูุชูุซูู**: ุณุฌู ุฃู ุชุบููุฑุงุช ูู ุงูุฅุนุฏุงุฏุงุช

---

**ุญุงูุฉ ุงูุญู**: โ **ููุทุจู ูููุฎุชุจุฑ ุจูุฌุงุญ**  
**ุชุงุฑูุฎ ุงูุชุทุจูู**: 20 ููููู 2025  
**ุงููุธุงู**: ุจูุฏูุฉ ุชูุฑูุช - ุทูุจุงุช ุงูููุงุทููู 