# ๐ง ุชุนูููุงุช ุชุทุจูู Triggers ููุฑุจุท ุงูุชููุงุฆู

## โ๏ธ ููุงุญุธุฉ ูููุฉ:

ุงูุณูุฑูุจุช ุงูุฑุฆูุณู (`unify_projects_system.sql`) ุชู ุชูููุฐู ุจูุฌุงุญุ ููู **Triggers** ูุง ูููู ุชูููุฐูุง ุนุจุฑ PHP.

ูุฌุจ ุชุทุจูููุง ูุฏููุงู ุนุจุฑ **phpMyAdmin** ุฃู **MySQL CLI**.

---

## ๐ ุงูุฎุทูุงุช:

### **ุงูุทุฑููุฉ 1: ุนุจุฑ phpMyAdmin (ุงูุฃุณูู)**

1. ุงูุชุญ **phpMyAdmin**:
   ```
   http://localhost/phpmyadmin
   ```

2. ุงุฎุชุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช:
   ```
   tekrit_municipality
   ```

3. ุงุถุบุท ุนูู ุชุจููุจ **SQL**

4. ุงูุชุญ ุงูููู `setup_triggers.sql` ุจุจุฑูุงูุฌ ูุตู (Notepad++)

5. **ุงูุณุฎ ุงููุญุชูู ูุงููุงู**

6. **ุงูุตู ูู phpMyAdmin**

7. ุงุถุบุท **Go** ุฃู **ุชูููุฐ**

8. ุณุชุธูุฑ ุฑุณุงูุฉ: โ "ุชู ุฅูุดุงุก Triggers ุจูุฌุงุญ!"

---

### **ุงูุทุฑููุฉ 2: ุนุจุฑ MySQL CLI**

ุฅุฐุง ููุช ุชูุถู ุณุทุฑ ุงูุฃูุงูุฑ:

```bash
mysql -u root -p tekrit_municipality < setup_triggers.sql
```

---

## ๐ฏ ูุงุฐุง ุชูุนู Triggersุ

### **Trigger 1: after_contribution_insert**
ุนูุฏ ุฅุถุงูุฉ ูุณุงููุฉ ุฌุฏูุฏุฉ:
1. โ ุชุญุฏูุซ `projects.contributions_collected` ุชููุงุฆูุงู
2. โ ุฅูุดุงุก ูุนุงููุฉ ูุงููุฉ (ุฅูุฑุงุฏ) ูู `financial_transactions`
3. โ ุฑุจุท ุงููุณุงููุฉ ุจุงููุนุงููุฉ ุงููุงููุฉ

### **Trigger 2: after_contribution_delete**
ุนูุฏ ุญุฐู ูุณุงููุฉ:
1. โ ุชุญุฏูุซ `projects.contributions_collected` (ุทุฑุญ ุงููุจูุบ)

---

## โ ุจุฏูู Triggers - ูู ูุนูู ุงููุธุงูุ

**ูุนู!** ุงููุธุงู ูุนููุ ููู:

### **ูุน Triggers**:
- โ ุฑุจุท ุชููุงุฆู 100%
- โ ูุง ุญุงุฌุฉ ูุฅุฏุฎุงู ูุฏูู ูู financial_transactions
- โ ุฏูุฉ ูุทููุฉ

### **ุจุฏูู Triggers** (ูุคูุชุงู):
- โ ุงููุธุงู ูุนูู
- โ๏ธ ูุฌุจ ุฅุถุงูุฉ ุงููุนุงููุฉ ุงููุงููุฉ ูุฏููุงู
- โ๏ธ ูุฌุจ ุชุญุฏูุซ contributions_collected ูุฏููุงู

---

## ๐ ุงูุจุฏูู ุงููุคูุช (ุฅุฐุง ูู ุชุทุจู Triggers):

ุณุฃุถูู ุงูุฑุจุท ุงูุชููุงุฆู ูู ููุฏ PHP ูุจุงุดุฑุฉ ูู ุตูุญุฉ ุงููุณุงููุงุช.

ูุฐุง ุณูุนูู ุจููุณ ุงูููุงุกุฉุ ููู Triggers ุฃูุถู ููุฃุฏุงุก.

---

## ๐ ูู ุชุฑูุฏ ุงููุณุงุนุฏุฉุ

ุฅุฐุง ูุงุฌูุช ูุดููุฉ ูู ุชุทุจูู Triggers:
1. ุฃุฎุจุฑูู ูุณุฃุถุน ุงูุฑุจุท ูู ููุฏ PHP
2. ุฃู ุดุงุฑููู screenshot ูู phpMyAdmin

---

**ุงูุขู: ุฌุฑุจ ูุชุญ ุตูุญุฉ ุงููุดุงุฑูุน ุงูููุญุฏุฉ:**
```
http://localhost:8080/tekrit_municipality/modules/projects_unified.php
```

**ูุฌุจ ุฃู ุชุนูู ุจุฏูู ูุดุงูู ุญุชู ุจุฏูู Triggers!** โ


