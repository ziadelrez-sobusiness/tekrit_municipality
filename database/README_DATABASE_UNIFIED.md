# ملفات قاعدة البيانات الموحدة لنظام إدارة بلدية تكريت

## نظرة عامة
تم دمج جميع ملفات قاعدة البيانات الأربعة في ثلاثة ملفات موحدة لسهولة الإدارة وتجنب الضياع بين الملفات المتعددة.

## الملفات الموحدة

### 1. `complete_database_unified.sql` - الجزء الأول
**يحتوي على:**
- إنشاء قاعدة البيانات
- جدول العملات
- جدول المستخدمين
- جدول الجهات المانحة
- جدول المواطنين
- جدول أنواع الجباية

### 2. `complete_database_unified_part2.sql` - الجزء الثاني
**يحتوي على:**
- جدول عمليات الجباية
- جدول الشكاوى
- جدول المشاريع
- جدول مراحل تنفيذ المشاريع
- جدول التبرعات
- جدول إدارة المتبرعين
- جدول شهادات الشكر والتقدير
- جدول حملات التبرع
- ربط التبرعات بالحملات

### 3. `complete_database_unified_part3.sql` - الجزء الثالث
**يحتوي على:**
- جدول الآليات والمعدات
- جدول صيانة الآليات
- جدول الإيرادات والمصروفات
- جدول الأرشيف الإلكتروني
- جدول جداول جمع النفايات
- جدول تقارير النظافة
- جدول رخص البناء
- جدول سجل النشاطات
- جميع الفهارس
- البيانات التجريبية

## طريقة التشغيل

### 1. تشغيل من خلال phpMyAdmin
```
1. افتح phpMyAdmin
2. اختر "Import" أو "استيراد"
3. اختر الملف الأول: complete_database_unified.sql
4. اضغط "Go" أو "تنفيذ"
5. كرر العملية للملف الثاني والثالث بالترتيب
```

### 2. تشغيل من خلال سطر الأوامر
```bash
# تشغيل الملف الأول
mysql -u root -p < complete_database_unified.sql

# تشغيل الملف الثاني
mysql -u root -p < complete_database_unified_part2.sql

# تشغيل الملف الثالث
mysql -u root -p < complete_database_unified_part3.sql
```

### 3. تشغيل من خلال PowerShell (Windows)
```powershell
# الانتقال إلى مجلد قاعدة البيانات
cd C:\xampp\htdocs\tekrit_municipality\database

# تشغيل الملفات بالترتيب
C:\xampp\mysql\bin\mysql.exe -u root -p < complete_database_unified.sql
C:\xampp\mysql\bin\mysql.exe -u root -p < complete_database_unified_part2.sql
C:\xampp\mysql\bin\mysql.exe -u root -p < complete_database_unified_part3.sql
```

## محتويات قاعدة البيانات

### الجداول الرئيسية (20 جدول)
1. **currencies** - العملات المدعومة
2. **users** - المستخدمين والموظفين
3. **donor_organizations** - الجهات المانحة المفصلة
4. **citizens** - سجل المواطنين الشامل
5. **tax_types** - أنواع الجباية والرسوم
6. **tax_collections** - عمليات الجباية
7. **complaints** - الشكاوى
8. **projects** - المشاريع
9. **project_phases** - مراحل تنفيذ المشاريع
10. **donations** - التبرعات
11. **donors** - إدارة المتبرعين
12. **appreciation_certificates** - شهادات الشكر والتقدير
13. **donation_campaigns** - حملات التبرع
14. **campaign_donations** - ربط التبرعات بالحملات
15. **vehicles** - الآليات والمعدات
16. **vehicle_maintenance** - صيانة الآليات
17. **financial_transactions** - المعاملات المالية
18. **documents** - الأرشيف الإلكتروني
19. **waste_collection_schedules** - جداول جمع النفايات
20. **cleaning_reports** - تقارير النظافة
21. **building_permits** - رخص البناء
22. **activity_log** - سجل النشاطات

### العملات المدعومة
- **IQD** - الدينار العراقي (العملة الأساسية)
- **USD** - الدولار الأمريكي
- **EUR** - اليورو
- **SAR** - الريال السعودي
- **TRY** - الليرة التركية
- **IRR** - الريال الإيراني

### البيانات التجريبية المضمنة
- **5 أنواع جباية** مختلفة (رسوم، ضرائب، غرامات، إشغالات، تراخيص)
- **5 مواطنين** بحالات تحقق مختلفة
- **5 جهات مانحة** (محلية ودولية)
- **5 تبرعات** بأنواع مختلفة (نقدي، عيني، خدمي)
- **5 متبرعين** بتقييمات مختلفة

## الميزات الجديدة

### 1. نظام العملات المتعدد
- دعم 6 عملات رئيسية
- تحويل تلقائي للدينار العراقي
- أسعار صرف قابلة للتحديث

### 2. إدارة الجهات المانحة الشاملة
- معلومات مفصلة للجهات المانحة
- تصنيف حسب النوع (حكومي، دولي، خيري، إلخ)
- تقييم الموثوقية ومستوى الشراكة
- تتبع الإحصائيات والتمويل

### 3. سجل المواطنين المتطور
- بيانات شخصية شاملة
- معلومات السكن والاتصال
- الحالة الاجتماعية والمهنية
- نظام التحقق من البيانات

### 4. نظام الجباية الإلكتروني
- تعريف أنواع الجباية بتفصيل
- حساب تلقائي للمبالغ والخصومات
- تتبع حالات الدفع
- دعم العملات المتعددة

### 5. تتبع مراحل تنفيذ المشاريع
- تفصيل مراحل المشروع
- تتبع التكاليف والتقدم
- تقييم الأثر والضرورة
- معلومات الجهة المنفذة والمستفيدين

## الأمان والصيانة

### الفهارس المحسّنة
- فهارس على جميع الحقول المهمة
- تحسين أداء الاستعلامات
- فهارس مركبة للبحث المتقدم

### العلاقات الآمنة
- مفاتيح خارجية محددة بدقة
- حماية تكامل البيانات
- حذف آمن للسجلات المترابطة

### سجل النشاطات
- تتبع جميع العمليات
- معلومات المستخدم و IP
- سجل التغييرات القديمة والجديدة

## المتطلبات

### الحد الأدنى
- MySQL 5.7 أو أحدث
- PHP 7.4 أو أحدث
- مساحة تخزين: 50 ميجابايت على الأقل

### الموصى به
- MySQL 8.0 أو أحدث
- PHP 8.0 أو أحدث
- مساحة تخزين: 500 ميجابايت أو أكثر

## الدعم والصيانة

### الملفات الأصلية (للمراجع فقط)
- `schema.sql` - المخطط الأساسي الأصلي
- `enhanced_system_upgrade.sql` - ترقية النظام المحسن
- `upgrade_currency_donations.sql` - ترقية العملات والتبرعات
- `create_new_tables.sql` - الجداول الجديدة المختصرة

**⚠️ تنبيه:** استخدم الملفات الموحدة فقط للتطبيق الجديد. الملفات الأصلية محفوظة للمراجع.

## اتصل للدعم
في حالة واجهتك أي مشاكل في التطبيق، يرجى مراجعة:
1. رسائل الخطأ في MySQL
2. صحة ترتيب تنفيذ الملفات
3. صلاحيات المستخدم في قاعدة البيانات
4. إعدادات XAMPP/MySQL

---
**تاريخ آخر تحديث:** 2025-01-26  
**إصدار قاعدة البيانات:** v2.0.0  
**نظام:** بلدية تكريت - نظام الإدارة الإلكترونية 